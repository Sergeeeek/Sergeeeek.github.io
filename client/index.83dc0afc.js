import{S as s,i as a,s as e,e as t,B as r,w as l,a as c,b as o,C as n,x as i,f,D as h,h as d,j as m,y as u,c as $,I as v,d as g,m as p,a4 as j,t as x,k as E,o as b,X as y,n as I,a5 as k}from"./client.bb71c458.js";import{F as w,e as D}from"./fa.af679af7.js";import{c as M}from"./colors.fe90293f.js";import{a as P,t as V}from"./store.e324006f.js";import{M as A}from"./MessageHeader.5a1b69c6.js";function O(s,a,e){const t=s.slice();return t[3]=a[e],t}function S(s){let a,e;return a=new w({props:{icon:D,size:"3x",color:M.primary}}),{c(){$(a.$$.fragment)},l(s){g(a.$$.fragment,s)},m(s,t){p(a,s,t),e=!0},p:I,i(s){e||(x(a.$$.fragment,s),e=!0)},o(s){E(a.$$.fragment,s),e=!1},d(s){b(a,s)}}}function z(s,a){let e,$,v,g,p,j,x,E,b,y,I,k,w,D,M,P=a[3].name+"",V=(a[1][a[3].id]?.text??"")+"";return{key:s,first:null,c(){e=t("a"),$=t("div"),v=t("img"),j=r(),x=t("div"),E=t("p"),b=l(P),y=r(),I=t("p"),k=t("span"),w=l(V),D=r(),this.h()},l(s){e=c(s,"A",{class:!0,href:!0});var a=o(e);$=c(a,"DIV",{class:!0});var t=o($);v=c(t,"IMG",{class:!0,src:!0,alt:!0}),j=n(t),x=c(t,"DIV",{class:!0});var r=o(x);E=c(r,"P",{class:!0});var l=o(E);b=i(l,P),l.forEach(f),y=n(r),I=c(r,"P",{class:!0});var h=o(I);k=c(h,"SPAN",{class:!0}),o(k).forEach(f),w=i(h,V),h.forEach(f),r.forEach(f),t.forEach(f),D=n(a),a.forEach(f),this.h()},h(){h(v,"class","avatar svelte-oa9u3h"),v.src!==(g=a[3].avatar)&&h(v,"src",g),h(v,"alt",p=a[3].name),h(E,"class","thread-title svelte-oa9u3h"),h(k,"class","message-from"),h(I,"class","last-message svelte-oa9u3h"),h(x,"class","thread-body svelte-oa9u3h"),h($,"class","leading svelte-oa9u3h"),h(e,"class","thread svelte-oa9u3h"),h(e,"href",M="/tinder/messages/"+a[3].id),this.first=e},m(s,a){d(s,e,a),m(e,$),m($,v),m($,j),m($,x),m(x,E),m(E,b),m(x,y),m(x,I),m(I,k),m(I,w),m(e,D)},p(s,a){1&a&&v.src!==(g=s[3].avatar)&&h(v,"src",g),1&a&&p!==(p=s[3].name)&&h(v,"alt",p),1&a&&P!==(P=s[3].name+"")&&u(b,P),3&a&&V!==(V=(s[1][s[3].id]?.text??"")+"")&&u(w,V),1&a&&M!==(M="/tinder/messages/"+s[3].id)&&h(e,"href",M)},d(s){s&&f(e)}}}function B(s){let a,e,l,i,m,u=[],y=new Map;e=new A({props:{justify:"center",$$slots:{default:[S]},$$scope:{ctx:s}}});let I=s[0];const w=s=>s[3].id;for(let a=0;a<I.length;a+=1){let e=O(s,I,a),t=w(e);y.set(t,u[a]=z(t,e))}return{c(){a=r(),$(e.$$.fragment),l=r(),i=t("div");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){v('[data-svelte="svelte-iekcck"]',document.head).forEach(f),a=n(s),g(e.$$.fragment,s),l=n(s),i=c(s,"DIV",{class:!0});var t=o(i);for(let s=0;s<u.length;s+=1)u[s].l(t);t.forEach(f),this.h()},h(){document.title="Tindor: Сообщения",h(i,"class","threads-container svelte-oa9u3h")},m(s,t){d(s,a,t),p(e,s,t),d(s,l,t),d(s,i,t);for(let s=0;s<u.length;s+=1)u[s].m(i,null);m=!0},p(s,[a]){const t={};if(64&a&&(t.$$scope={dirty:a,ctx:s}),e.$set(t),3&a){const e=s[0];u=j(u,a,w,1,s,e,y,i,k,z,null,O)}},i(s){m||(x(e.$$.fragment,s),m=!0)},o(s){E(e.$$.fragment,s),m=!1},d(s){s&&f(a),b(e,s),s&&f(l),s&&f(i);for(let s=0;s<u.length;s+=1)u[s].d()}}}function C(s,a,e){let t,r,l;return y(s,P,(s=>e(0,t=s))),y(s,V,(s=>e(2,r=s))),s.$$.update=()=>{5&s.$$.dirty&&e(1,l=t.map((s=>{var a;const e=null===(a=r[s.id])||void 0===a?void 0:a.messages;return[s.id,null==e?void 0:e[e.length-1]]})).reduce(((s,[a,e])=>Object.assign(Object.assign({},s),{[a]:e})),{}))},[t,l,r]}export default class extends s{constructor(s){super(),a(this,s,C,B,e,{})}}
