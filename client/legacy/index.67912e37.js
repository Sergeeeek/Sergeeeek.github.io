import{_ as t,a,b as n,c as s,i as r,d as e,S as o,s as c,e as i,H as f,B as u,g as l,h as v,I as d,C as h,k as m,J as p,m as $,n as g,D as y,f as j,P as E,j as b,o as x,w as D,ad as P,t as I,q as R,u as k,a4 as w,p as M,ae as S}from"./client.c472f99c.js";import{F as V,e as A}from"./fa.2f601026.js";import{c as H}from"./colors.fe90293f.js";import{a as O,t as _}from"./store.734d9603.js";import{_ as q}from"./defineProperty.b786bad4.js";import{M as z}from"./MessageHeader.b174f913.js";function B(t){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,e=a(t);if(s){var o=a(this).constructor;r=Reflect.construct(e,arguments,o)}else r=e.apply(this,arguments);return n(this,r)}}function C(t,a,n){var s=t.slice();return s[3]=a[n],s}function F(t){var a,n;return a=new V({props:{icon:A,size:"3x",color:H.primary}}),{c:function(){j(a.$$.fragment)},l:function(t){b(a.$$.fragment,t)},m:function(t,s){x(a,t,s),n=!0},p:M,i:function(t){n||(I(a.$$.fragment,t),n=!0)},o:function(t){R(a.$$.fragment,t),n=!1},d:function(t){k(a,t)}}}function G(t,a){var n,s,r,e,o,c,j,E,b,x,D,P,I,R,k,w,M,S=a[3].name+"",V=(null!==(n=null===(s=a[1][a[3].id])||void 0===s?void 0:s.text)&&void 0!==n?n:"")+"";return{key:t,first:null,c:function(){r=i("a"),e=i("div"),o=i("img"),E=f(),b=i("div"),x=i("p"),D=u(S),P=f(),I=i("p"),R=i("span"),k=u(V),w=f(),this.h()},l:function(t){r=l(t,"A",{class:!0,href:!0});var a=v(r);e=l(a,"DIV",{class:!0});var n=v(e);o=l(n,"IMG",{class:!0,src:!0,alt:!0}),E=d(n),b=l(n,"DIV",{class:!0});var s=v(b);x=l(s,"P",{class:!0});var c=v(x);D=h(c,S),c.forEach(m),P=d(s),I=l(s,"P",{class:!0});var i=v(I);R=l(i,"SPAN",{class:!0}),v(R).forEach(m),k=h(i,V),i.forEach(m),s.forEach(m),n.forEach(m),w=d(a),a.forEach(m),this.h()},h:function(){p(o,"class","avatar svelte-oa9u3h"),o.src!==(c=a[3].avatar)&&p(o,"src",c),p(o,"alt",j=a[3].name),p(x,"class","thread-title svelte-oa9u3h"),p(R,"class","message-from"),p(I,"class","last-message svelte-oa9u3h"),p(b,"class","thread-body svelte-oa9u3h"),p(e,"class","leading svelte-oa9u3h"),p(r,"class","thread svelte-oa9u3h"),p(r,"href",M="/tinder/messages/"+a[3].id),this.first=r},m:function(t,a){$(t,r,a),g(r,e),g(e,o),g(e,E),g(e,b),g(b,x),g(x,D),g(b,P),g(b,I),g(I,R),g(I,k),g(r,w)},p:function(t,a){var n,s;1&a&&o.src!==(c=t[3].avatar)&&p(o,"src",c),1&a&&j!==(j=t[3].name)&&p(o,"alt",j),1&a&&S!==(S=t[3].name+"")&&y(D,S),3&a&&V!==(V=(null!==(n=null===(s=t[1][t[3].id])||void 0===s?void 0:s.text)&&void 0!==n?n:"")+"")&&y(k,V),1&a&&M!==(M="/tinder/messages/"+t[3].id)&&p(r,"href",M)},d:function(t){t&&m(r)}}}function J(t){var a,n,s,r,e,o=[],c=new Map;n=new z({props:{justify:"center",$$slots:{default:[F]},$$scope:{ctx:t}}});for(var u=t[0],h=function(t){return t[3].id},g=0;g<u.length;g+=1){var y=C(t,u,g),w=h(y);c.set(w,o[g]=G(w,y))}return{c:function(){a=f(),j(n.$$.fragment),s=f(),r=i("div");for(var t=0;t<o.length;t+=1)o[t].c();this.h()},l:function(t){E('[data-svelte="svelte-iekcck"]',document.head).forEach(m),a=d(t),b(n.$$.fragment,t),s=d(t),r=l(t,"DIV",{class:!0});for(var e=v(r),c=0;c<o.length;c+=1)o[c].l(e);e.forEach(m),this.h()},h:function(){document.title="Tindor: Сообщения",p(r,"class","threads-container svelte-oa9u3h")},m:function(t,c){$(t,a,c),x(n,t,c),$(t,s,c),$(t,r,c);for(var i=0;i<o.length;i+=1)o[i].m(r,null);e=!0},p:function(t,a){var s=D(a,1)[0],e={};if(64&s&&(e.$$scope={dirty:s,ctx:t}),n.$set(e),3&s){var i=t[0];o=P(o,s,h,1,t,i,c,r,S,G,null,C)}},i:function(t){e||(I(n.$$.fragment,t),e=!0)},o:function(t){R(n.$$.fragment,t),e=!1},d:function(t){t&&m(a),k(n,t),t&&m(s),t&&m(r);for(var e=0;e<o.length;e+=1)o[e].d()}}}function N(t,a,n){var s,r,e;return w(t,O,(function(t){return n(0,s=t)})),w(t,_,(function(t){return n(2,r=t)})),t.$$.update=function(){5&t.$$.dirty&&n(1,e=s.map((function(t){var a,n=null===(a=r[t.id])||void 0===a?void 0:a.messages;return[t.id,null==n?void 0:n[n.length-1]]})).reduce((function(t,a){var n=D(a,2),s=n[0],r=n[1];return Object.assign(Object.assign({},t),q({},s,r))}),{}))},[s,e,r]}var T=function(a){t(i,o);var n=B(i);function i(t){var a;return s(this,i),a=n.call(this),r(e(a),t,N,J,c,{}),a}return i}();export default T;
