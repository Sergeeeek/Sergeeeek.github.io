import{A as t,$ as e,ac as r}from"./client.c472f99c.js";function o(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(t){return this instanceof n?(this.v=t,this):new n(t)}function s(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=r.apply(t,e||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(t){s[t]&&(o[t]=function(e){return new Promise((function(r,o){i.push([t,e,r,o])>1||f(t,e)}))})}function f(t,e){try{(r=s[t](e)).value instanceof n?Promise.resolve(r.value.v).then(x,m):u(i[0][2],r)}catch(t){u(i[0][3],t)}var r}function x(t){f("next",t)}function m(t){f("throw",t)}function u(t,e){t(e),i.shift(),i.length&&f(i[0][0],i[0][1])}}function i(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=o(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(o,n){(function(t,e,r,o){Promise.resolve(o).then((function(e){t({value:e,done:r})}),e)})(o,n,(e=t[r](e)).done,e.value)}))}}}const a="7F0C551D-CC8B4737-89E1728C-4BA71F30",f=20;var x;!function(t){t.EndWithSerega="EndWithSerega",t.RejectSerega="RejectSerega",t.EndWithOther="EndWithOther"}(x||(x={}));const m={EndWithSerega:{type:x.EndWithSerega},RejectSerega:{type:x.RejectSerega},EndWithOther:{type:x.EndWithOther}};function u(e){switch(e.type){case x.EndWithSerega:return void setTimeout((()=>t("/ending/serega")),5e3);case x.EndWithOther:return void setTimeout((()=>t("/ending/other")),5e3);case x.RejectSerega:return void setTimeout((()=>t("/ending/reject")),5e3)}}function l(t){return{text:Math.random()>.7?"Пошёл нахуй":"Отвали",help:"Заблокировать",result:[{from:t,text:":("},{from:-2,text:"Пользователь заблокирован",action:20===t?m.RejectSerega:void 0}]}}function c(t,o){{const n=localStorage.getItem(t),s=n?JSON.parse(n):void 0,i=e(s?s.value:o),{subscribe:a}=i;return{set(e){localStorage.setItem(t,JSON.stringify({value:e})),i.set(e)},update(t){const e=t(r(i));this.set(e)},subscribe:a}}}const h=c("lastDialogId",0);var g;!function(t){t.Serega="Serega",t.OtherGuy="OtherGuy",t.Single="Single"}(g||(g={}));const d=c("nextMatchId",0),p=(c("ending",void 0),c("matches",[{id:100,name:"Григорий Золотухин",age:24,avatar:"https://uifaces.co/our-content/donated/TRkRhV48.jpg",description:"Нет описания."},{id:102,name:"Андрей Арбузов",age:20,avatar:"https://uifaces.co/our-content/donated/Photo_14.jpg",description:"Нет описания."}]));function y(t){const e=20===t.id||Math.random()>.5,o=20===t.id;if(e){const e=o?t:Object.assign(Object.assign({},t),function(t){const e=[{from:t,text:"Ну и пошла ты!"},{from:t,text:"Правильно мама мне говорила, все женщины - шлюхи!"},{from:t,text:"Стоп, она же тоже женщина..."},{from:t,text:"Не важно! Всё, я тебя бросаю! Надеюсь ты понимаешь кого ты потеряла!"},{from:-2,text:"Пользователь заблокировал вас"}],o=[{from:t,text:"Ты наверное считаешь меня странным"},{from:t,text:"Но я лучший парень которого ты встречала!"},{from:t,text:"**гордо смотрит в сторону**"},{from:t,text:"Я буду тебя любить, заботиться, помогать!"},{from:t,text:"Я не такой как остальные парни которым нужен только секс!"},{from:t,text:"**поправляет очки с ухмылкой**"},{from:t,text:"Будь моей и ты не пожалеешь)))",options:[{text:"Ну давай, попробуем",help:"Пойти на свидание",result:[{from:t,text:"Ч-что? Она согласилась?!"},{from:t,text:"**радостно прыгает**"},{from:t,text:"Вот это да, впервые я пойду на свидание с реальной девушкой!",action:m.EndWithOther}]},{text:"Полегче, мы ещё друг друга не знаем",result:e},{text:"Ты реально странный",result:e}]}],n=[{from:t,text:"Я знал что ты не устоишь ;)",action:m.EndWithOther}],s=[{from:t,text:"Что-ж детка, я не буду долго тянуть, ведь я знаю что ты меня уже хочешь"},{from:t,text:"Так что как насчёт увидится? Я покатаю тебя на своём Харлее, погоняем по красивым местам, а потом ко мне, выпьем?",options:[{text:"Звучит заманчиво)",help:"Согласиться",result:n},{text:"Хмм, с чего это ты взял что я тебя хочу?",result:[{from:t,text:"Ну как же, все тёлки меня хотят)"},{from:t,text:"Ну так что?"},{from:t,text:"Решай быстрее, я ещё троим предложил то же самое",options:[{text:"Уговорил)",help:"Пойти на свидание",result:n},{text:"Нет, не пойду",result:[{from:t,text:"Понятно. Ладно, мне тут уже ответила какая-то куколка. Прощай ;)"},{from:-2,text:"Пользователь заблокировал вас"}]}]}]},l(t)]}],i=[{from:t,text:"Здорово! Я чувствую - это начало чего-то большего.",action:m.EndWithOther}],a=[{from:t,text:"Знаешь, ты меня очень впечатлила и я хотел бы с тобой встретиться. Что ты об этом думаешь?",options:[{text:"Я согласна",help:"Пойти на свидание",result:i},{text:"Извините, меня это не интересует сейчас",help:"Отказ",result:[{from:t,text:"Понимаю, хорошо, пишите если передумаете.",options:[{text:"Я передумала",help:"Пойти на свидание",result:i}]}]},l(t)]}],f=[{from:t,text:"Чем ты любишь заниматься?",options:[{text:"Читать, немного рисовать. Люблю русскую классику. А ты?",result:[{from:t,text:"Ого, да мне сегодня везёт. Не часто встретишь девушку которая любит читать, да ещё и ценит русскую классику"},{from:t,text:"Я тоже люблю литературу!"},{from:t,text:"Расскажи, Катя, ты сейчас работаешь или может учишься?",options:[{text:"Учусь на преподавателя русского языка",result:[{from:t,text:"Ничего себе. Это же так здорово прививать любовь к языку детям!"},...a]},{text:"Работаю",result:[{from:t,text:"Это замечательно, не сидеть на месте."},...a]},{text:"И то и другое",result:[{from:t,text:"Ого, это наверное так тяжело!"},...a]},{text:"Ни то, ни другое",result:[{from:t,text:"Понятно, ну что-ж, всему своё время"},...a]},l(t)]}]},{text:"Пинать хуи",result:[{from:t,text:"Хм, не очень продуктивно."},{from:t,text:"Извини, но я не хочу строить отношения с девушками которые грубят другим. Прощай."},{from:-2,text:"Пользователь заблокировал вас"}]},l(t)]}],x=[{initialMessages:[{from:t,text:"Привет девушка"},{from:t,text:"Ты тыкой красивый"},{from:t,text:"Покажешь попа сиски",options:[{text:"нет, попа сиски не покажу",result:[{from:t,text:"ну покажи",options:[{text:"нет"},l(t)]}]},{text:"на держи",help:"Ничего не показать",result:[{from:t,text:"зачем ты меня обманеш"},{from:t,text:"попа сиске же нет",options:[{text:"я не обманеш",result:[{from:t,text:"обманеш",options:[{text:"нет"},l(t)]}]},l(t)]}]},l(t)]}]},{initialResponses:[{text:"Привет",result:[{from:t,text:"О, привет"},{from:t,text:"**нервно вздыхает**"},{from:t,text:"Мне ещё никогда девушка первой не писала)))",options:[{text:"Я уже жалею об этом...",result:o},{text:"Зачем ты пишешь от третьего лица?",result:o},l(t)]}]}]},{initialMessages:[{from:t,text:"Привет, красотуля)",options:[{text:"Привет, ты тоже ничего)",result:[{from:t,text:"Я знаю)"},...s]},{text:"Привет)",result:s},l(t)]}]},{initialMessages:[{from:t,text:"Привет, хочешь увидеть мой трёхметровый шланг?",options:[{text:"Ахах, типа огородный?",result:[{from:t,text:"Нет, я про свой член)",options:[{text:"Понятно, не интересно",help:"Заблокировать",result:[{from:-2,text:"Пользователь заблокирован"}]}]}]},{text:"Мм, нет, спасибо",result:[{from:t,text:"Да ладно, ты небось такой никогда не видела",options:[{text:"И не хочу, спасибо...",help:"Заблокировать",result:[{from:-2,text:"Пользователь заблокирован"}]}]}]},l(t)]}]},{initialMessages:[{from:t,text:"Приветики"},{from:t,text:"Как дела? Чем занимаешь?"},{from:t,text:"У меня вот всё хорошо, недавно бентли купил)"},{from:t,text:"У меня отец просто чиновник, ну ты сама понимаешь"},{from:t,text:"Короче дела супер всегда)"},{from:t,text:"Летом летал на Бали"},{from:t,text:"Этим летом хочу сразу в 3 страны слетать, по месяцу в каждой"},{from:t,text:"А, ещё недавно эпл вотч взял, вообще крутая тема. Жалко бедных людей у которых его нет"},{from:t,text:"Вообще если рассказать о себе, то я довольно скромный парень"},{from:t,text:"Не люблю хвастаться"},{from:t,text:"Простой, так сказать"},{from:t,text:"Люблю русский рэп и дрифтовать по дорогам) Особенно рядом с Казань Ареной, там есть классное местечко"},{from:t,text:"На бэнтли ещё не пробовал правда, батя не разрешает потому-что я бэху разбил..."},{from:t,text:"Как-то так. А ты чего молчишь?",options:[{text:"Да ты и сам прекрасно справляешься",result:[{from:t,text:"Хаха, это да, люблю поболтать"},{from:t,text:"Я тут подумал, мы уже так близко знакомы. Может я за тобой заеду и мы прокатимся по ночному городу?"},{from:t,text:"Можем даже выпить за рулём, батя отмажет если что)))",options:[{text:"Прикольно, давай)",help:"Пойти на свидание",result:[{from:t,text:"Отлично)",action:m.EndWithOther}]},{text:"Нет, извини",help:"Заблокировать",result:[{from:-2,text:"Пользователь заблокирован"}]},l(t)]}]},{text:"Не люблю таких как ты",result:[{from:t,text:"Пфф, ну и пошла ты"},{from:t,text:"Я ещё 100 шлюх таких как ты себе найду"},{from:t,text:"Тупые бабы, не знают от чего отказываются"},{from:t,text:"Уже пятая сегодня отказывает, у вас чё мозгов нет?"},{from:t,text:"Ладно, не буду тратить время на тебя"},{from:-2,text:"Пользователь заблокировал вас"}]},l(t)]}]},{initialMessages:[{from:t,text:"Здравствуй, ты мне сразу понравилась как я тебя увидел. Давай знакомиться.",options:[{text:"Здравствуй, давай",result:f},{text:"Привет)",result:f},{text:"Привет. Очень приятно, спасибо)",result:[{from:t,text:"Не за что)"},...f]},{text:"Давайте не будем",help:"Заблокировать",result:[{from:-2,text:"Пользователь заблокирован"}]}]}]},{initialResponses:[{text:"Привет"},l(t)]}],u=Math.min(r(h),x.length-1);return console.log(u),h.update((t=>t+1)),x[u]}(t.id));p.update((t=>[...t,e])),function(t){t.initialMessages&&w(t.id,t.initialMessages)}(e)}return e}const S=c("threads",{100:{messages:[{from:100,text:"Привет, как дела?",options:[l(100)]}]},102:{messages:[{from:102,text:"Привет!"},{from:-1,text:"Привет"},{from:102,text:"Ты очень красивая! 😍"},{from:-1,text:"Спасибо)"},{from:102,text:"Чем занимаешься?"},{from:-1,text:"Да так, ничем. А ты?"},{from:102,text:"Ем арбуз)"},{from:-1,text:"Мм, прикольно"},{from:102,text:"Обожаю арбузы"},{from:102,text:"Давай встретимся?"},{from:-1,text:"Давай"},{from:-1,text:"Нахуя ты принёс арбуз на свидание???"},{from:102,text:"..."},{from:-2,text:"Екатерина заблокировала Андрея"}]}});function v(t,e){S.update((r=>{var o;const n=null!==(o=r[t])&&void 0!==o?o:{messages:[]};return Object.assign(Object.assign({},r),{[t]:Object.assign(Object.assign({},n),{messages:[...n.messages,e]})})})),e.action&&u(e.action)}function b(t){return new Promise((e=>setTimeout(e,t)))}class O{constructor(){const t=localStorage.getItem(O.key);this.state=t?JSON.parse(t):{}}setState(t){localStorage.setItem(O.key,JSON.stringify(t)),this.state=t}enqueueMessages(t,e){var r,o;this.setState(Object.assign(Object.assign({},this.state),{[t]:[...null!==(o=null===(r=this.state)||void 0===r?void 0:r[t])&&void 0!==o?o:[],...e]}))}async run(){var t,e;try{for(var r,o=i(this._run());!(r=await o.next()).done;){r.value}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=o.return)&&await e.call(o)}finally{if(t)throw t.error}}}_run(){return s(this,arguments,(function*(){for(;;){console.log("RUNNING",this.state);const t=Date.now();for(const e in this.state){const r=this.state[e].filter((e=>e.ts<=t)),o=this.state[e].filter((e=>e.ts>t));this.setState(Object.assign(Object.assign({},this.state),{[e]:o})),r.forEach((t=>v(parseInt(e),t.message)))}yield n(b(100))}}))}}O.key="dialog_player_state";const j=new O;function w(t,e,r=1e3,o=2e3){let n=Date.now();j.enqueueMessages(t,e.map((t=>(n+=r+Math.random()*o,{ts:n,message:t}))))}function E(t,e){v(t,{from:-1,text:e.text}),e.action&&u(e.action),e.result&&w(t,e.result)}j.run();export{m as D,f as S,a as U,p as a,l as f,y as m,d as n,E as r,S as t};
