import{_ as n,a as t,b as r,c as a,i as s,d as c,S as i,s as o,e,g as l,h as f,k as u,J as h,m,B as v,H as p,C as d,I as g,n as $,K as y,D as b,L as E,af as x,f as j,j as D,Q as I,o as R,a7 as k,w as P,q as T,x as w,t as M,u as N,a4 as V,ag as B,M as U,ah as z,z as H,X as O,v as S,p as G}from"./client.c472f99c.js";import{F as q,g as A,e as C}from"./fa.2f601026.js";import{c as F}from"./colors.fe90293f.js";import{a as J,t as K,r as L}from"./store.734d9603.js";import{M as Q}from"./MessageHeader.b174f913.js";import{k as X}from"./katya.45f1a1e1.js";function _(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var s,c=t(n);if(a){var i=t(this).constructor;s=Reflect.construct(c,arguments,i)}else s=c.apply(this,arguments);return r(this,s)}}function W(n,t,r){var a=n.slice();return a[23]=t[r],a}function Y(n,t,r){var a=n.slice();return a[26]=t[r],a}function Z(n){var t,r,a,s,c,i,o=n[1].name.split(" ")[0]+"";return{c:function(){t=e("img"),s=p(),c=e("p"),i=v(o),this.h()},l:function(n){t=l(n,"IMG",{class:!0,src:!0,alt:!0}),s=g(n),c=l(n,"P",{class:!0});var r=f(c);i=d(r,o),r.forEach(u),this.h()},h:function(){h(t,"class","avatar svelte-r2cib4"),t.src!==(r=n[1].avatar)&&h(t,"src",r),h(t,"alt",a=n[1].name),h(c,"class","header-title svelte-r2cib4")},m:function(n,r){m(n,t,r),m(n,s,r),m(n,c,r),$(c,i)},p:function(n,s){2&s&&t.src!==(r=n[1].avatar)&&h(t,"src",r),2&s&&a!==(a=n[1].name)&&h(t,"alt",a),2&s&&o!==(o=n[1].name.split(" ")[0]+"")&&b(i,o)},d:function(n){n&&u(t),n&&u(s),n&&u(c)}}}function nn(n){for(var t,r=n[2].messages,a=[],s=0;s<r.length;s+=1)a[s]=an(Y(n,r,s));return{c:function(){for(var n=0;n<a.length;n+=1)a[n].c();t=S()},l:function(n){for(var r=0;r<a.length;r+=1)a[r].l(n);t=S()},m:function(n,r){for(var s=0;s<a.length;s+=1)a[s].m(n,r);m(n,t,r)},p:function(n,s){if(6&s){var c;for(r=n[2].messages,c=0;c<r.length;c+=1){var i=Y(n,r,c);a[c]?a[c].p(i,s):(a[c]=an(i),a[c].c(),a[c].m(t.parentNode,t))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}},i:G,o:G,d:function(n){x(a,n),n&&u(t)}}}function tn(n){var t,r,a,s,c;return t=new q({props:{icon:C,size:"5x",color:F.secondary}}),{c:function(){j(t.$$.fragment),r=p(),a=e("p"),s=v("Нет сообщений, напишите первой!")},l:function(n){D(t.$$.fragment,n),r=g(n),a=l(n,"P",{});var c=f(a);s=d(c,"Нет сообщений, напишите первой!"),c.forEach(u)},m:function(n,i){R(t,n,i),m(n,r,i),m(n,a,i),$(a,s),c=!0},p:G,i:function(n){c||(M(t.$$.fragment,n),c=!0)},o:function(n){T(t.$$.fragment,n),c=!1},d:function(n){N(t,n),n&&u(r),n&&u(a)}}}function rn(n){var t,r,a;return{c:function(){t=e("img"),this.h()},l:function(n){t=l(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h:function(){h(t,"class","message-avatar svelte-r2cib4"),t.src!==(r=-1===n[26].from?X:n[1].avatar)&&h(t,"src",r),h(t,"alt",a=-1===n[26].from?"Екатерина Колмагорова":n[1].name)},m:function(n,r){m(n,t,r)},p:function(n,s){6&s&&t.src!==(r=-1===n[26].from?X:n[1].avatar)&&h(t,"src",r),6&s&&a!==(a=-1===n[26].from?"Екатерина Колмагорова":n[1].name)&&h(t,"alt",a)},d:function(n){n&&u(t)}}}function an(n){var t,r,a,s,c,i=n[26].text+"",o=-2!==n[26].from&&rn(n);return{c:function(){t=e("div"),o&&o.c(),r=p(),a=e("p"),s=v(i),c=p(),this.h()},l:function(n){t=l(n,"DIV",{class:!0});var e=f(t);o&&o.l(e),r=g(e),a=l(e,"P",{class:!0});var h=f(a);s=d(h,i),h.forEach(u),c=g(e),e.forEach(u),this.h()},h:function(){h(a,"class","message-text svelte-r2cib4"),h(t,"class","message svelte-r2cib4"),I(t,"my",-1===n[26].from),I(t,"system",-2===n[26].from)},m:function(n,i){m(n,t,i),o&&o.m(t,null),$(t,r),$(t,a),$(a,s),$(t,c)},p:function(n,a){-2!==n[26].from?o?o.p(n,a):((o=rn(n)).c(),o.m(t,r)):o&&(o.d(1),o=null),4&a&&i!==(i=n[26].text+"")&&b(s,i),4&a&&I(t,"my",-1===n[26].from),4&a&&I(t,"system",-2===n[26].from)},d:function(n){n&&u(t),o&&o.d()}}}function sn(n){for(var t,r,a,s,c=null!==(t=n[6])&&void 0!==t?t:[],i=[],o=0;o<c.length;o+=1)i[o]=on(W(n,c,o));return{c:function(){r=e("div");for(var n=0;n<i.length;n+=1)i[n].c();this.h()},l:function(n){r=l(n,"DIV",{class:!0});for(var t=f(r),a=0;a<i.length;a+=1)i[a].l(t);t.forEach(u),this.h()},h:function(){h(r,"class","options-container svelte-r2cib4")},m:function(n,t){m(n,r,t);for(var a=0;a<i.length;a+=1)i[a].m(r,null);s=!0},p:function(n,t){if(82&t){var a,s;for(c=null!==(a=n[6])&&void 0!==a?a:[],s=0;s<c.length;s+=1){var o=W(n,c,s);i[s]?i[s].p(o,t):(i[s]=on(o),i[s].c(),i[s].m(r,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=c.length}},i:function(n){s||(U((function(){a||(a=E(r,z,{},!0)),a.run(1)})),s=!0)},o:function(n){a||(a=E(r,z,{},!1)),a.run(0),s=!1},d:function(n){n&&u(r),x(i,n),n&&a&&a.end()}}}function cn(n){var t,r,a,s,c,i=n[23].help+"";return{c:function(){t=e("span"),r=v("("),a=v(i),s=v(")"),c=p(),this.h()},l:function(n){t=l(n,"SPAN",{class:!0});var o=f(t);r=d(o,"("),a=d(o,i),s=d(o,")"),o.forEach(u),c=g(n),this.h()},h:function(){h(t,"class","option-help svelte-r2cib4")},m:function(n,i){m(n,t,i),$(t,r),$(t,a),$(t,s),m(n,c,i)},p:function(n,t){64&t&&i!==(i=n[23].help+"")&&b(a,i)},d:function(n){n&&u(t),n&&u(c)}}}function on(n){var t,r,a,s,c,i=n[23].text+"",o=n[23].help&&cn(n);function E(){return n[21](n[23])}return{c:function(){t=e("button"),r=v(i),a=p(),o&&o.c(),this.h()},l:function(n){t=l(n,"BUTTON",{class:!0});var s=f(t);r=d(s,i),a=g(s),o&&o.l(s),s.forEach(u),this.h()},h:function(){h(t,"class","option svelte-r2cib4")},m:function(n,i){m(n,t,i),$(t,r),$(t,a),o&&o.m(t,null),s||(c=y(t,"click",E),s=!0)},p:function(a,s){n=a,64&s&&i!==(i=n[23].text+"")&&b(r,i),n[23].help?o?o.p(n,s):((o=cn(n)).c(),o.m(t,null)):o&&(o.d(1),o=null)},d:function(n){n&&u(t),o&&o.d(),s=!1,c()}}}function en(n){var t,r,a,s,c,i,o,b,E,x,V,B,z,O,S,G,C,F,J,K;t=new Q({props:{justify:"center",align:"center",$$slots:{default:[Z]},$$scope:{ctx:n}}});var L=[tn,nn],X=[];function _(n,t){return 0===n[2].messages.length?0:1}s=_(n),c=X[s]=L[s](n);var W=n[4]&&sn(n);return G=new q({props:{icon:A,color:"rgba(0,0,0,0.3)",size:"lg"}}),{c:function(){j(t.$$.fragment),r=p(),a=e("div"),c.c(),o=p(),b=e("div"),W&&W.c(),E=p(),x=e("div"),V=e("button"),B=e("p"),z=v("Напишите сообщение"),O=p(),S=e("button"),j(G.$$.fragment),this.h()},l:function(n){D(t.$$.fragment,n),r=g(n),a=l(n,"DIV",{class:!0});var s=f(a);c.l(s),s.forEach(u),o=g(n),b=l(n,"DIV",{class:!0});var i=f(b);W&&W.l(i),E=g(i),x=l(i,"DIV",{class:!0});var e=f(x);V=l(e,"BUTTON",{class:!0,disabled:!0});var h=f(V);B=l(h,"P",{class:!0});var m=f(B);z=d(m,"Напишите сообщение"),m.forEach(u),O=g(h),S=l(h,"BUTTON",{class:!0});var v=f(S);D(G.$$.fragment,v),v.forEach(u),h.forEach(u),e.forEach(u),i.forEach(u),this.h()},h:function(){h(a,"class","messages-container svelte-r2cib4"),U((function(){return n[20].call(a)})),I(a,"empty",0===n[2].messages.length),h(B,"class","typer-placeholder svelte-r2cib4"),h(S,"class","send-button svelte-r2cib4"),h(V,"class","typer svelte-r2cib4"),V.disabled=C=!n[5],I(V,"no-reply",!n[5]),h(x,"class","typer-container svelte-r2cib4"),h(b,"class","bottom-container")},m:function(c,e){R(t,c,e),m(c,r,e),m(c,a,e),X[s].m(a,null),n[19](a),i=k(a,n[20].bind(a)),m(c,o,e),m(c,b,e),W&&W.m(b,null),$(b,E),$(b,x),$(x,V),$(V,B),$(B,z),$(V,O),$(V,S),R(G,S,null),F=!0,J||(K=y(V,"click",n[22]),J=!0)},p:function(n,r){var i=P(r,1)[0],o={};536870914&i&&(o.$$scope={dirty:i,ctx:n}),t.$set(o);var e=s;(s=_(n))===e?X[s].p(n,i):(H(),T(X[e],1,1,(function(){X[e]=null})),w(),(c=X[s])?c.p(n,i):(c=X[s]=L[s](n)).c(),M(c,1),c.m(a,null)),4&i&&I(a,"empty",0===n[2].messages.length),n[4]?W?(W.p(n,i),16&i&&M(W,1)):((W=sn(n)).c(),M(W,1),W.m(b,E)):W&&(H(),T(W,1,1,(function(){W=null})),w()),(!F||32&i&&C!==(C=!n[5]))&&(V.disabled=C),32&i&&I(V,"no-reply",!n[5])},i:function(n){F||(M(t.$$.fragment,n),M(c),M(W),M(G.$$.fragment,n),F=!0)},o:function(n){T(t.$$.fragment,n),T(c),T(W),T(G.$$.fragment,n),F=!1},d:function(c){N(t,c),c&&u(r),c&&u(a),X[s].d(),n[19](null),i(),c&&u(o),c&&u(b),W&&W.d(),N(G),J=!1,K()}}}function ln(n,t,r){var a,s,c,i,o,e,l,f,u;V(n,J,(function(n){return r(16,s=n)})),V(n,K,(function(n){return r(17,c=n)}));var h,m,v=B().page;V(n,v,(function(n){return r(15,a=n)}));var p=!1;var d,g,$,y,b,E;return n.$$.update=function(){1&n.$$.dirty&&(null==h||h.scroll(0,0)),32768&n.$$.dirty&&r(14,d=a.params.id),82176&n.$$.dirty&&r(1,g=null!==r(8,i=s.find((function(n){return n.id==d})))&&void 0!==i?i:{id:-3,name:"Unknown",avatar:"",description:"",age:0}),147968&n.$$.dirty&&r(2,$=null!==r(9,o=c[d])&&void 0!==o?o:{messages:[]}),4&n.$$.dirty&&r(18,y=$.messages[$.messages.length-1]),277506&n.$$.dirty&&r(5,b=(null!==r(13,u=null!==r(11,l=null===r(10,e=null==y?void 0:y.options)||void 0===e?void 0:e.length)&&void 0!==l?l:null===r(12,f=g.initialResponses)||void 0===f?void 0:f.length)&&void 0!==u?u:0)>0),262146&n.$$.dirty&&r(6,E=y?y.options:g.initialResponses)},[h,g,$,m,p,b,E,v,i,o,e,l,f,u,d,a,s,c,y,function(n){O[n?"unshift":"push"]((function(){r(0,h=n)}))},function(){m=this.clientHeight,r(3,m)},function(n){L(g.id,n),r(4,p=!1)},function(){return r(4,p=!p)}]}var fn=function(t){n(e,i);var r=_(e);function e(n){var t;return a(this,e),t=r.call(this),s(c(t),n,ln,en,o,{}),t}return e}();export default fn;
