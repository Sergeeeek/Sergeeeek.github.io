import{S as s,i as t,s as e,e as a,a as l,b as r,f as n,D as c,h as o,w as i,B as m,x as f,C as h,j as u,E as p,y as d,F as g,a6 as v,c as $,d as b,J as y,m as E,_ as x,k as j,q as I,t as k,o as D,X as P,a7 as T,G as w,a8 as N,u as V,P as B,p as M,n as U}from"./client.bb71c458.js";import{F as G,g as O,e as z}from"./fa.af679af7.js";import{c as F}from"./colors.fe90293f.js";import{a as H,t as R,r as S}from"./store.e324006f.js";import{M as q}from"./MessageHeader.5a1b69c6.js";import{k as A}from"./katya.45f1a1e1.js";function C(s,t,e){const a=s.slice();return a[23]=t[e],a}function J(s,t,e){const a=s.slice();return a[26]=t[e],a}function X(s){let t,e,p,g,v,$,b=s[1].name.split(" ")[0]+"";return{c(){t=a("img"),g=m(),v=a("p"),$=i(b),this.h()},l(s){t=l(s,"IMG",{class:!0,src:!0,alt:!0}),g=h(s),v=l(s,"P",{class:!0});var e=r(v);$=f(e,b),e.forEach(n),this.h()},h(){c(t,"class","avatar svelte-r2cib4"),t.src!==(e=s[1].avatar)&&c(t,"src",e),c(t,"alt",p=s[1].name),c(v,"class","header-title svelte-r2cib4")},m(s,e){o(s,t,e),o(s,g,e),o(s,v,e),u(v,$)},p(s,a){2&a&&t.src!==(e=s[1].avatar)&&c(t,"src",e),2&a&&p!==(p=s[1].name)&&c(t,"alt",p),2&a&&b!==(b=s[1].name.split(" ")[0]+"")&&d($,b)},d(s){s&&n(t),s&&n(g),s&&n(v)}}}function _(s){let t,e=s[2].messages,a=[];for(let t=0;t<e.length;t+=1)a[t]=Q(J(s,e,t));return{c(){for(let s=0;s<a.length;s+=1)a[s].c();t=M()},l(s){for(let t=0;t<a.length;t+=1)a[t].l(s);t=M()},m(s,e){for(let t=0;t<a.length;t+=1)a[t].m(s,e);o(s,t,e)},p(s,l){if(6&l){let r;for(e=s[2].messages,r=0;r<e.length;r+=1){const n=J(s,e,r);a[r]?a[r].p(n,l):(a[r]=Q(n),a[r].c(),a[r].m(t.parentNode,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=e.length}},i:U,o:U,d(s){v(a,s),s&&n(t)}}}function K(s){let t,e,c,p,d;return t=new G({props:{icon:z,size:"5x",color:F.secondary}}),{c(){$(t.$$.fragment),e=m(),c=a("p"),p=i("Нет сообщений, напишите первой!")},l(s){b(t.$$.fragment,s),e=h(s),c=l(s,"P",{});var a=r(c);p=f(a,"Нет сообщений, напишите первой!"),a.forEach(n)},m(s,a){E(t,s,a),o(s,e,a),o(s,c,a),u(c,p),d=!0},p:U,i(s){d||(k(t.$$.fragment,s),d=!0)},o(s){j(t.$$.fragment,s),d=!1},d(s){D(t,s),s&&n(e),s&&n(c)}}}function L(s){let t,e,r;return{c(){t=a("img"),this.h()},l(s){t=l(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){c(t,"class","message-avatar svelte-r2cib4"),t.src!==(e=-1===s[26].from?A:s[1].avatar)&&c(t,"src",e),c(t,"alt",r=-1===s[26].from?"Екатерина Колмагорова":s[1].name)},m(s,e){o(s,t,e)},p(s,a){6&a&&t.src!==(e=-1===s[26].from?A:s[1].avatar)&&c(t,"src",e),6&a&&r!==(r=-1===s[26].from?"Екатерина Колмагорова":s[1].name)&&c(t,"alt",r)},d(s){s&&n(t)}}}function Q(s){let t,e,p,g,v,$=s[26].text+"",b=-2!==s[26].from&&L(s);return{c(){t=a("div"),b&&b.c(),e=m(),p=a("p"),g=i($),v=m(),this.h()},l(s){t=l(s,"DIV",{class:!0});var a=r(t);b&&b.l(a),e=h(a),p=l(a,"P",{class:!0});var c=r(p);g=f(c,$),c.forEach(n),v=h(a),a.forEach(n),this.h()},h(){c(p,"class","message-text svelte-r2cib4"),c(t,"class","message svelte-r2cib4"),y(t,"my",-1===s[26].from),y(t,"system",-2===s[26].from)},m(s,a){o(s,t,a),b&&b.m(t,null),u(t,e),u(t,p),u(p,g),u(t,v)},p(s,a){-2!==s[26].from?b?b.p(s,a):(b=L(s),b.c(),b.m(t,e)):b&&(b.d(1),b=null),4&a&&$!==($=s[26].text+"")&&d(g,$),4&a&&y(t,"my",-1===s[26].from),4&a&&y(t,"system",-2===s[26].from)},d(s){s&&n(t),b&&b.d()}}}function W(s){let t,e,i,m=s[6]??[],f=[];for(let t=0;t<m.length;t+=1)f[t]=Z(C(s,m,t));return{c(){t=a("div");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){t=l(s,"DIV",{class:!0});var e=r(t);for(let s=0;s<f.length;s+=1)f[s].l(e);e.forEach(n),this.h()},h(){c(t,"class","options-container svelte-r2cib4")},m(s,e){o(s,t,e);for(let s=0;s<f.length;s+=1)f[s].m(t,null);i=!0},p(s,e){if(82&e){let a;for(m=s[6]??[],a=0;a<m.length;a+=1){const l=C(s,m,a);f[a]?f[a].p(l,e):(f[a]=Z(l),f[a].c(),f[a].m(t,null))}for(;a<f.length;a+=1)f[a].d(1);f.length=m.length}},i(s){i||(w((()=>{e||(e=g(t,N,{},!0)),e.run(1)})),i=!0)},o(s){e||(e=g(t,N,{},!1)),e.run(0),i=!1},d(s){s&&n(t),v(f,s),s&&e&&e.end()}}}function Y(s){let t,e,p,g,v,$=s[23].help+"";return{c(){t=a("span"),e=i("("),p=i($),g=i(")"),v=m(),this.h()},l(s){t=l(s,"SPAN",{class:!0});var a=r(t);e=f(a,"("),p=f(a,$),g=f(a,")"),a.forEach(n),v=h(s),this.h()},h(){c(t,"class","option-help svelte-r2cib4")},m(s,a){o(s,t,a),u(t,e),u(t,p),u(t,g),o(s,v,a)},p(s,t){64&t&&$!==($=s[23].help+"")&&d(p,$)},d(s){s&&n(t),s&&n(v)}}}function Z(s){let t,e,g,v,$,b=s[23].text+"",y=s[23].help&&Y(s);function E(){return s[21](s[23])}return{c(){t=a("button"),e=i(b),g=m(),y&&y.c(),this.h()},l(s){t=l(s,"BUTTON",{class:!0});var a=r(t);e=f(a,b),g=h(a),y&&y.l(a),a.forEach(n),this.h()},h(){c(t,"class","option svelte-r2cib4")},m(s,a){o(s,t,a),u(t,e),u(t,g),y&&y.m(t,null),v||($=p(t,"click",E),v=!0)},p(a,l){s=a,64&l&&b!==(b=s[23].text+"")&&d(e,b),s[23].help?y?y.p(s,l):(y=Y(s),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},d(s){s&&n(t),y&&y.d(),v=!1,$()}}}function ss(s){let t,e,d,g,v,P,T,N,B,M,U,z,F,H,R,S,A,C,J,L;t=new q({props:{justify:"center",align:"center",$$slots:{default:[X]},$$scope:{ctx:s}}});const Q=[K,_],Y=[];function Z(s,t){return 0===s[2].messages.length?0:1}g=Z(s),v=Y[g]=Q[g](s);let ss=s[4]&&W(s);return S=new G({props:{icon:O,color:"rgba(0,0,0,0.3)",size:"lg"}}),{c(){$(t.$$.fragment),e=m(),d=a("div"),v.c(),T=m(),N=a("div"),ss&&ss.c(),B=m(),M=a("div"),U=a("button"),z=a("p"),F=i("Напишите сообщение"),H=m(),R=a("button"),$(S.$$.fragment),this.h()},l(s){b(t.$$.fragment,s),e=h(s),d=l(s,"DIV",{class:!0});var a=r(d);v.l(a),a.forEach(n),T=h(s),N=l(s,"DIV",{class:!0});var c=r(N);ss&&ss.l(c),B=h(c),M=l(c,"DIV",{class:!0});var o=r(M);U=l(o,"BUTTON",{class:!0,disabled:!0});var i=r(U);z=l(i,"P",{class:!0});var m=r(z);F=f(m,"Напишите сообщение"),m.forEach(n),H=h(i),R=l(i,"BUTTON",{class:!0});var u=r(R);b(S.$$.fragment,u),u.forEach(n),i.forEach(n),o.forEach(n),c.forEach(n),this.h()},h(){c(d,"class","messages-container svelte-r2cib4"),w((()=>s[20].call(d))),y(d,"empty",0===s[2].messages.length),c(z,"class","typer-placeholder svelte-r2cib4"),c(R,"class","send-button svelte-r2cib4"),c(U,"class","typer svelte-r2cib4"),U.disabled=A=!s[5],y(U,"no-reply",!s[5]),c(M,"class","typer-container svelte-r2cib4"),c(N,"class","bottom-container")},m(a,l){E(t,a,l),o(a,e,l),o(a,d,l),Y[g].m(d,null),s[19](d),P=x(d,s[20].bind(d)),o(a,T,l),o(a,N,l),ss&&ss.m(N,null),u(N,B),u(N,M),u(M,U),u(U,z),u(z,F),u(U,H),u(U,R),E(S,R,null),C=!0,J||(L=p(U,"click",s[22]),J=!0)},p(s,[e]){const a={};536870914&e&&(a.$$scope={dirty:e,ctx:s}),t.$set(a);let l=g;g=Z(s),g===l?Y[g].p(s,e):(V(),j(Y[l],1,1,(()=>{Y[l]=null})),I(),v=Y[g],v?v.p(s,e):(v=Y[g]=Q[g](s),v.c()),k(v,1),v.m(d,null)),4&e&&y(d,"empty",0===s[2].messages.length),s[4]?ss?(ss.p(s,e),16&e&&k(ss,1)):(ss=W(s),ss.c(),k(ss,1),ss.m(N,B)):ss&&(V(),j(ss,1,1,(()=>{ss=null})),I()),(!C||32&e&&A!==(A=!s[5]))&&(U.disabled=A),32&e&&y(U,"no-reply",!s[5])},i(s){C||(k(t.$$.fragment,s),k(v),k(ss),k(S.$$.fragment,s),C=!0)},o(s){j(t.$$.fragment,s),j(v),j(ss),j(S.$$.fragment,s),C=!1},d(a){D(t,a),a&&n(e),a&&n(d),Y[g].d(),s[19](null),P(),a&&n(T),a&&n(N),ss&&ss.d(),D(S),J=!1,L()}}}function ts(s,t,e){let a,l,r;var n,c,o,i,m,f;P(s,H,(s=>e(16,l=s))),P(s,R,(s=>e(17,r=s)));const{page:h}=T();let u,p;P(s,h,(s=>e(15,a=s)));let d=!1;let g,v,$,b,y,E;return s.$$.update=()=>{1&s.$$.dirty&&(null==u||u.scroll(0,0)),32768&s.$$.dirty&&e(14,g=a.params.id),82176&s.$$.dirty&&e(1,v=null!==e(8,n=l.find((({id:s})=>s==g)))&&void 0!==n?n:{id:-3,name:"Unknown",avatar:"",description:"",age:0}),147968&s.$$.dirty&&e(2,$=null!==e(9,c=r[g])&&void 0!==c?c:{messages:[]}),4&s.$$.dirty&&e(18,b=$.messages[$.messages.length-1]),277506&s.$$.dirty&&e(5,y=(null!==e(13,f=null!==e(11,i=null===e(10,o=null==b?void 0:b.options)||void 0===o?void 0:o.length)&&void 0!==i?i:null===e(12,m=v.initialResponses)||void 0===m?void 0:m.length)&&void 0!==f?f:0)>0),262146&s.$$.dirty&&e(6,E=b?b.options:v.initialResponses)},[u,v,$,p,d,y,E,h,n,c,o,i,m,f,g,a,l,r,b,function(s){B[s?"unshift":"push"]((()=>{u=s,e(0,u)}))},function(){p=this.clientHeight,e(3,p)},s=>{S(v.id,s),e(4,d=!1)},()=>e(4,d=!d)]}export default class extends s{constructor(s){super(),t(this,s,ts,ss,e,{})}}
